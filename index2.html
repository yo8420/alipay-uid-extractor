<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alipay UID æå–å·¥å…·</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">

    const { useState } = React;

    function AlipayUIDExtractor() {
      const [inputUrl, setInputUrl] = useState("");
      const [uid, setUid] = useState("");
      const [copied, setCopied] = useState(false);

      const extractUID = () => {
        try {
          const decoded = decodeURIComponent(inputUrl);
          const match = decoded.match(/uid[=\\/%3D]?([0-9a-zA-Z]+)/);
          if (match && match[1]) {
            setUid(match[1]);
          } else {
            setUid("âŒ æœªæ‰¾åˆ° UIDï¼Œè«‹ç¢ºèªéˆçµæ ¼å¼ã€‚");
          }
        } catch (err) {
          setUid("âŒ è§£æéŒ¯èª¤ï¼šè«‹è¼¸å…¥æœ‰æ•ˆçš„URLã€‚");
        }
      };

      const handleCopy = () => {
        if (uid && !uid.startsWith("âŒ")) {
          navigator.clipboard.writeText(uid);
          setCopied(true);
          setTimeout(() => setCopied(false), 2000);
        }
      };

      return (
        <div style={{ padding: 24, maxWidth: 600, margin: "auto", fontFamily: "sans-serif" }}>
          <h2>ğŸ” Alipay UID æå–å·¥å…·</h2>
          <input
            style={{ width: "100%", padding: 8 }}
            placeholder="è²¼ä¸Š Alipay è·³è½‰é€£çµæˆ–äºŒç¶­ç¢¼ç¶²å€"
            value={inputUrl}
            onChange={(e) => setInputUrl(e.target.value)}
          />
          <button style={{ marginTop: 8 }} onClick={extractUID}>è§£æ UID</button>
          {uid && (
            <div style={{ marginTop: 16 }}>
              <strong>çµæœï¼š</strong> {uid}
              {!uid.startsWith("âŒ") && (
                <button onClick={handleCopy} style={{ marginLeft: 8 }}>è¤‡è£½</button>
              )}
              {copied && <span style={{ color: "green", marginLeft: 8 }}>âœ” å·²è¤‡è£½</span>}
            </div>
          )}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<AlipayUIDExtractor />);

  </script>
</body>
</html>
